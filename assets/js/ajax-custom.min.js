"use strict";if("undefined"==typeof iqSearchInputs)for(var _iqSearchInputs=document.getElementsByClassName("ajax_search_input"),ind=0;ind<_iqSearchInputs.length;ind++){var element=_iqSearchInputs[ind];element.addEventListener("keyup",function(e){getAjaxSearch(e)})}var getAjaxSearch=_.debounce(function(e){var t,s=e.target,e=s.value;3<e.length?(s.closest(".header-search").querySelector(".socialv-search-result").classList.remove("search-result-dislogbox"),(t=new FormData).append("action","ajax_search_content"),t.append("keyword",e),(e=new XMLHttpRequest).open("POST",socialv_loadmore_params.ajaxurl,!0),e.onload=function(){var e,t;200<=this.status&&this.status<400?(e=JSON.parse(this.response).data.content,t=JSON.parse(this.response).data.details,s.closest(".header-search").querySelector(".socialv-search-activity-content").innerHTML=e,s.closest(".header-search").querySelector(".item-footer").innerHTML=void 0!==t?t:""):s.closest(".header-search").querySelector(".socialv-search-activity-content").innerHTML=""},e.onerror=function(){s.closest(".header-search").querySelector(".socialv-search-activity-content").innerHTML=""},e.onprogress=function(){s.closest(".header-search").querySelector(".socialv-search-activity-content").innerHTML='<li><span class="socialv-loader"></span></li>'},e.send(t)):s.closest(".header-search").querySelector(".socialv-search-result").classList.add("search-result-dislogbox")},500);document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector(".socialv-search-result");null!==t&&document.addEventListener("click",function(e){e=e.target;t.contains(e)||t.classList.add("search-result-dislogbox")})}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".socialv-friendship-btn").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var s=this,e=s.getAttribute("data-friendship-id"),t=s.classList.contains("accept")?"friends_accept_friendship":"friends_reject_friendship",n=new XMLHttpRequest;return n.open("POST",ajaxurl),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){var e,t;n.readyState===XMLHttpRequest.DONE&&(200===n.status?(t=(e=JSON.parse(n.responseText)).data.feedback,s.closest(".socialv-friend-request").querySelector(".response").innerHTML=t,e.success&&s.closest(".request-button").remove(),(t=document.getElementById("notify-count"))&&(1<(e=parseInt(t.textContent))?t.textContent=e-1:(t.textContent="",t.classList.remove("notify-count")))):console.error("An error occurred during the AJAX request."))},n.send("action=socialv_ajax_addremove_friend&friendship_id="+e+"&data_action="+t),!1})})}),document.addEventListener("click",function(e){e.target.closest(".btn-dropdown")&&document.querySelectorAll(".sharing-options").forEach(function(e){e.classList.remove("open")}),e.target.closest(".socialv-header-right .dropdown-toggle")&&document.querySelector(".socialv-search-result").classList.add("search-result-dislogbox")}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".socialv-share-post .share-btn").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();e=this.parentElement.querySelector(".sharing-options");e&&(e.classList.contains("open")?document.querySelectorAll(".sharing-options").forEach(function(e){e.classList.remove("open")}):(document.querySelectorAll(".sharing-options").forEach(function(e){e.classList.remove("open")}),e.classList.add("open")))})})}),document.addEventListener("click",function(e){var t,s;e.target.matches("a.share_activity-share")&&(e.preventDefault(),e=(t=e.target).getAttribute("href"),(s=new XMLHttpRequest).open("POST",ajaxurl),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onload=function(){200===s.status&&(s.responseText&&(t.closest(".socialv-share-post").querySelector(".share-btn .share_icon").innerHTML='<i class="icon-circle-check"></i>'),setTimeout(function(){t.closest(".socialv-share-post").querySelector(".share-btn .share_icon").innerHTML='<i class="icon-share"></i>'},3e3))},s.send("action=socialv_post_share_activity&activity_id="+encodeURIComponent(e)),t.closest(".sharing-options").classList.remove("open"),t.closest(".socialv-share-post").querySelector(".share-btn .share_icon").innerHTML='<i class="icon-loader-circle"></i>')});